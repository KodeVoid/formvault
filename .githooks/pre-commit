#!/bin/sh

RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m' # No Color

echo "ğŸ” Checking formatting..."
if ! cargo fmt --all -- --check; then
  echo "${RED}âŒ Formatting check failed. Run 'cargo fmt --all' to fix it.${NC}"
  exit 1
fi

echo "ğŸ§¹ Linting with Clippy..."
if ! cargo clippy --all-targets -- -D warnings; then
  echo "${RED}âŒ Clippy reported warnings or errors. Fix them before committing.${NC}"
  exit 1
fi

echo "ğŸ§ª Running tests..."
if ! cargo test; then
  echo "${RED}âŒ Tests failed. Fix them before committing.${NC}"
  exit 1
fi

echo "${GREEN}âœ… All pre-commit checks passed.${NC}"
